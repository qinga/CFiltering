<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta charset="utf-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../../Admin/font-awesome-4.7.0/css/font-awesome.min.css"/>
		<link rel="stylesheet" href="../../Admin/layui/css/layui.css" type="text/css" />
		<link rel="stylesheet" href="./slider.css" type="text/css">
		<link rel="stylesheet" href="./page.css" type="text/css">
		<style>
			.user-card-box .g-user-card .user-center-box ul li{
				float: left;
			}
			.user-card-box .g-user-card .user-center-box ul li a{
				display:inline-block;
				text-align: center;
			}
			.s-suggestion {
			    padding: 7px 10px;
			    font-size: 16px;
			    cursor: pointer;
			}
			.activeDivSu{
				background: #cfcf;
			}
			.course-info-main .aside .learn-btn a{
					display: block;
					padding: 11px 32px;
					font-size: 16px;
					line-height: 24px;
					border-radius: 24px;
					border-style: solid;
					border-width: 1px;
					cursor: pointer;
					-weibkit-transition: all .3s;
					-moz-transition: all .3s;
					transition: all .3s;
					color: #fff;
					background-color: #f20d0d;
					border-color: #f20d0d;
					opacity: 1;
					text-align: center;
			}
			.course-aside-info{
				margin-top:-170px;
			}
			.course-info-tip dd.star-score{
				margin-top:10px;
			}
			.course-info-tip dd.star-score i{
				cursor: pointer;
			}
			.dd_input_pin .input_cn_pin{
				display: inline-block;
				width: 100%;
				border: 1px solid #cfcfcf;
				border-radius: 2px;
				height: 24px;
				padding-left: 4px;
				padding: 5px 0px 5px 5px;
				margin-top: 10px;
			}
			.dd_input_pin i.button_cn_pin{
				float: right;
				margin-right: -9px;
				cursor: pointer;
			}
			.course-infos .statics .book-info-image{
			    position: relative;
			    padding-left: 56px;
			    padding-right: 60px;
			    line-height: 12px;
			    font-size: 12px;
			}
			.course-infos .statics .book-info-image img{
				border-radius: 50%;
			}
			.recom-course-list-box ul li{
				cursor:pointer;
			}
		</style>
	</head>

	<body>
		<div id="header">
			<div class="page-container clearfix" id="nav">
				<div id="logo" class="logo">
					<a href="../index.html"  title="首页" style="text-align:center;">
						<img title="推荐系统" src="./img/logo.png" style="height:72px;">
					</a>
				</div>
				<ul class="nav-item">
					<li>
						<a href="./booksInfo.html" class="active">书籍目录</a>
					</li>
					<li>
						<a href="../booksType/booksType.html">书海</a>
					</li>
					<li>
						<a href="../shareDynaticLink/index.html">猿分享</a>
					</li>
				</ul>
				<div id="login-area">
					<ul class="clearfix logined">
						<li class="set_btn user-card-box" id="header-user-card">
							<a id="header-avator" class="user-card-item js-header-avator login_area_img"  href="javascript:void(0)">
								<img src="" width="40" height="40">
							</a>
							<div class="g-user-card">
								<div class="card-inner">
									<div class="card-top clearfix">
										<a href="" class="l login_area_img">
											<img src="" alt="">
										</a>
										<div class="card-top-right-box l">
											<a href="">
												<span class="name text-ellipsis"></span>
											</a>
										</div>
									</div>
									<div class="user-center-box">
										<ul class="clearfix">
											<li class="lispace">
												<a href="../myShareArticleAndHouse/myHouseArticle.html">
													<span>我的收藏</span>
												</a>
											</li>
											<li class="lispace">
												<a href="../myShareArticleAndHouse/myShareArticle.html">
													<span>我的分享</span>
												</a>
											</li>
											<li class="lispace">
												<a href="../perManage/perManage.html">
													<span>我的课程</span>
												</a>
											</li>
											<li class="lispace">
												<a href="../myShareArticleAndHouse/myLearnPath.html">
													<span>学习路线</span>
												</a>
											</li>
										</ul>
									</div>
									<div class="card-sets clearfix logoutApp">
										<a href="javascript:void(0)" class="l">安全退出</a>
									</div>
								</div>
							</div>
						</li>
					</ul>
				</div>
				<div class="search-warp clearfix" style="min-width: 32px; height: 72px;">
					<div class="pa searchTags">
						<a href="../booksType/booksType.html">小程序</a>
						<a href="../booksType/booksType.html">JAVA入门</a>
					</div>
					<div class="search-area" data-search="top-banner">
						<input class="search-input" type="text" autocomplete="off">
						<ul class="search-area-result">
						</ul>
					</div>
					<div class="showhide-search" style="font-size: 18px;">
						<i class="fa fa-search" aria-hidden="true"></i>
					</div>
				</div>
			</div>
		</div>

		<div id="main">
			<div class="course-infos">
				<div class="w pr">
					<div class="path">
						<a href="javascript:void(0)">课程</a>
						<i class="path-split">\</i>
						<a href="javascript:void(0)"></a>
						<i class="path-split">\</i>
						<a href="javascript:void(0)"></a>
						<i class="path-split">\</i>
						<a href="javascript:void(0)"><span></span></a>
					</div>
					<div class="hd clearfix">
						<h2 class="l"></h2>
					</div>
					<div class="statics clearfix">
						<div class="book-info-image l">
				            <a href="javascript:void(0)">
				                <img class="js-usercard-dialog" src="" width="80" height="80">
				            </a>
				        </div>
						<div class="static-item l">
							<span class="meta">难度</span><span class="meta-value"></span>
						</div>
						<div class="static-item l">
							<span class="meta">收藏人数</span><span class="meta-value js-learn-num"></span>
						</div>
						<div class="static-item l score-btn">
							<span class="meta">综合评分</span><span class="meta-value"></span>
						</div>
					</div>
					<div class="extra">
						<div class="share-action r bdsharebuttonbox bdshare-button-style0-16">
							<div class="share js-follow-action"  title="收藏">
								<i class="fa fa-star-half-o" aria-hidden="true"></i>
								<span>收藏</span>
							</div>
							<a href="javascript:;" class="fa fa-qq share " title="分享到QQ空间"></a>
							<a href="javascript:;" class="fa fa-weibo share " title="分享到微信"></a>
						</div>
					</div>
				</div>
			</div>
			<div class="course-info-menu green-box">
				<div class="w">
					<ul class="course-menu">
						<li>
							<a class="moco-change-big-btn active" href="javascript:void(0)">课程章节</a>
						</li>
						<li>
							<span><!-- 几条评论 --></span>
							<a id="qaOn" class="moco-change-big-btn" href="javascript:void(0)">书籍评论</a>
						</li>
					</ul>
				</div>
			</div>
			<div class="course-info-main clearfix w">
				<div class="content-wrap clearfix">
					<div class="content">
						<div class="course-description course-wrap">
						<!-- 书籍描述 -->
						</div>
						<div class="course-chapters">
						</div>
					</div>
					<div class="aside r">
						<div class="course-wrap course-aside-info js-usercard-box">
					        <div class="learn-btn">
			                    <a href="/video/18390" class="moco-btn moco-btn-red moco-btn-lg J-learn-course">书籍评价</a>
			                </div>
					        <div class="course-info-tip">
					            <dl class="first">
					                <dt>书籍评论：</dt>
					                <dd class="autowrap pin_lun_value">
					                </dd>
					            </dl>
					            <dl>
					                <dt>星级评分：</dt>
					                <dd class="autowrap star-score">
					                	<i class="fa fa-star-o fa-2x" title="评星级更好的为您推荐"></i>
					                	<i class="fa fa-star-o fa-2x" title="评星级更好的为您推荐"></i>
					                	<i class="fa fa-star-o fa-2x" title="评星级更好的为您推荐"></i>
					                	<i class="fa fa-star-o fa-2x" title="评星级更好的为您推荐"></i>
					                	<i class="fa fa-star-o fa-2x" title="评星级更好的为您推荐"></i>
									</dd>
									<dd class="dd_input_pin" style="position:relative;">
										<input type="text" class="input_cn_pin" placeholder="共同学习，写下你的评论">
										<i aria-hidden="true" class="fa fa-share-square fa-2x button_cn_pin"></i>
									</dd>
					            </dl>
					       </div>
					    </div>
						<div class="js-commend-box">
							<div class="mb40 recom-course-list-box">
								<h4>推荐课程</h4>
								<ul class="js-recom-course moco-aside-course clearfix">
									<!-- js推荐课程 -->
								</ul>
							</div>
						</div>
						<div class="js-related-box">
							<div class="mb40 recom-course-list-box">
								<h4>猜您需要</h4>
								<ul class="js-recom-course moco-aside-course clearfix">
									<!-- js推荐课程 -->
								</ul>
							</div>
						</div>
					</div>
				</div>
				<div class="clear"></div>
			</div>
		</div>

		<div id="footer">
			<div class="waper">
			</div>
		</div>
		<div id="J_GotoTop" class="elevator">
			<a href="" class="elevator-msg" target="_blank">
				<i class="fa fa-comment-o" aria-hidden="true"></i>
				<span class="">意见反馈</span>
			</a>
			<a href="" class="elevator-faq" target="_blank">
				<i class="fa fa-question-circle" aria-hidden="true"></i>
				<span class="">常见问题</span>
			</a>
			<a href="" target="_blank" class="elevator-app">
				<i class="fa fa-mobile" aria-hidden="true"></i>
				<span class="">APP下载</span>
			</a>
			<a href="javascript:void(0)" class="elevator-weixin no-goto" id="js-elevator-weixin">
				<i class="fa fa-weixin" aria-hidden="true"></i>
				<span class="">官方微信</span>
			</a>
			<a href="javascript:void(0)" class="elevator-top no-goto" id="backTop">
				<i class="fa fa-chevron-circle-up" aria-hidden="true"></i>
				<span class="">返回顶部</span>
			</a>
		</div>
		<script type="text/javascript" src="../js/jquery.min.js"></script>
		<script type="text/javascript" src="./js/mo-share.js"></script>
		<script type="text/javascript" src="./js/booksInforLogin.js"></script>
		<script type="text/javascript" src="./js/search.js"></script>
		<!-- layui.js -->
		<script src="../../Admin/layui/layui.js"></script>
		<script type="text/javascript">
			//获取url查询参数
			// param: name | type:string | return string OR null;
			function getQueryString(name) { 
		        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i"); 
		        var r = window.location.search.substr(1).match(reg); 
		        if (r != null) return unescape(r[2]); 
		        return null; 
		    } 
			$(function(){
				//页面关闭前执行，这个函数
				var start;
				var end;
				var times = 0;
				start = new Date();//用户进入时间
				$(window).bind('unload', function (e) {
					e.preventDefault();
				    end = new Date(); //用户退出时间
				    times = end.getTime() - start.getTime();
				    times = Math.ceil(times / 1000); //取的是秒并且化整
				    console.log(times + " outer ")
				    var dbID = localStorage.getItem("dbID");
				    if(  dbID !== null ){
				    	if( times >= 10 &&  times <= 600){
				    		if(times >= 10 && times <= 120){
				    			times = 1;
				    		}else if(times > 120 && times <= 240){
				    			times = 2;
				    		}else if(times > 240 && times <= 360){
				    			times = 3;
				    		}else if(times > 360 && times <= 480){
				    			times = 4;
				    		}else{
				    			times = 5;
				    		}
				    		console.log(times)
							$.ajax({
								url: "UserHouseBookAction_pinScore",
								type: "post",
								dataType: "json",
								data: {
			    					"dbID": dbID,
			    					"bookID": getQueryString("bookId"),
			    					"times": times
			    				}
							}).then( (res) => {
								
							}, (res) => {
							})
				    	}
		    		}
				    return false;
				});
				//难度系数的判断
				// param: data | type:string | return string;
				function leagal(data){
					var param;
					if( data["begin"] === 1){
						param = "入门";
					}else if( data["new"] === 1){
						param = "中级";
					}else if( data["skill"] === 1 ){
						param = "高级";
					}else{
						param = "中级";
					}
					delete data["begin"];
					delete data["new"];
					delete data["skill"];
					data["flag"] = param;
					return data;
				}
				//将书籍的目录，解析成固定格式
				// param: data | type:string | return array;
				function sortArr(data){
					var arr = [];
					var outer = data.split(";");
					for(var i = 0; i < outer.length; i++){
						var inner = outer[i].split(",");
						arr.push(inner);
					}
					return arr;
				}
				//将书籍目录渲染一下
				// param: data | type:array | return ;
				function xuanran(data){
					var str = `<div class="course-chapters">`;
					for( var i = 0; i < data.length; i++){
							str +=`<div class="chapter course-wrap ">`;
								 //i表示章节
								 str +=`<h3>
					                       	 ${data[i][0]}
					                    </h3>`
								 str +=		`<ul class="video">`;
											  for( var j = 1; j < data[i].length; j++){
												//j表达书籍每一条目录
								 str +=			`<li>
													<a href="javascript:void(0)" class="J-media-item">
														<i class="fa fa-book" aria-hidden="true" style="margin-right:10px;"></i> 
															${data[i][j]}
													</a>
												</li>`
											  }
								str +=	    `</ul>
									</div>`;
						}
					 	str +=`</div>`;
					 	$(".course-chapters").after(str);
				}
				//ajax通用发送
				function ajaxSend( params ){
					const param = {
							type: "post",
							url: null,
							dataType: "json",
							async: true,
							data:{}
					};
					$.extend(true, param, params );
					return new Promise( (resolve, reject) => {
						$.ajax({
							type: param.type,
				    	 	url: param.url,
							dataType: param.dataType,
				    		async: true,
				    		data: param.data
						}).then( (res) => {
							resolve(res)
						}, (res) => {
							reject(res)
						})
					})
				};
				var param = {
						url: "FindBooksAction_findBookByID",
						data:{
							"bookID": getQueryString("bookId")
						}
				}
				//请求书籍
				ajaxSend( param )
					.then( (res) => {
						if( res.code === 200 && res.msg === "SUCCESS"){
							var data = leagal(res.data);
							$(".book-info-image img").attr("src",data.boImg);
							//方向
							$(".course-infos .path").find("a:eq(1)").text(data.dcName);
							//类别
							$(".course-infos .path").find("a:eq(2)").text(data.tyName);
							//书籍名字
							$(".course-infos .path").find("a:eq(3)").find("span").text(data.boName);
							$("title").text(data.boName);
							//书籍大名字
							$(".course-infos .hd").find("h2").text(data.boName);
							//书籍级别（入门，中级，高级)
							$(".course-infos div.statics").find(".static-item:eq(0)").find("span:last").text(data.flag);
							//收藏人数
							$(".course-infos div.statics").find(".static-item:eq(1)").find("span:last").text(data.houseCount)
							//综合评分
							$(".course-infos div.statics").find(".static-item:eq(2)").find("span:last").text(data.scoreCount === "null" ? "0.0" : data.scoreCount)
							//书籍简介
							$("#main").find(".course-description").html("简介:&nbsp;&nbsp;" + data.boDesc);
							//评论人数
							$("#main .w").find("ul li:last").find("span").text(data.comentCount);
							//将书籍解析成固定格式
							var content = sortArr(data["content"]);
							//将书籍目录渲染一下
							xuanran(content);
						}
					}, () => {
						
					})
					
					//获取用户的评论，星级处。。
					var paramSend = {
						url: "FindBooksAction_findPinLunByID",
						data:{
							"bookID": getQueryString("bookId")
						}
					}
					ajaxSend( paramSend )
						.then( (res) => {
							if(res.code === 200 && res.msg === "SUCCESS"){
								let{
									data
								} = res;
								var str = ``;
								for(var i = 0; i < data.length; i++){
									str += `<p><span style="color:#f05a28;">${data[i].name}:</span>&nbsp;&nbsp;${data[i].comment}</p>`;
								}
								$("dd.pin_lun_value").html(str);
							}
						}, () => {
								errorTip("操作异常 请稍后重试");
						})
					
					
					
						//基于用户的协同过滤推荐。。当用户登录了时
						var dbID = localStorage.getItem("dbID");
						if( dbID !== null){
							//基于用户的协同过滤
							var param = {
								url: "RecommenderAction_findUserRecommer",
								data:{
									"userID": dbID
								}
							};
							ajaxSend(param)
								.then( (res) => {
									if(res.code === 200 && res.msg === "SUCCESS"){
										xuanranRecomender(res);
									}
								}, () => {
											errorTip("网络异常 请稍后重试");
								}).then( () => {
										//点击书籍，跳转到相应的书籍详细列表中
										var liElement = $(".recom-course-list-box ul").find("li");
										$.each(liElement, function(k, v){
											$(v).on("click", function(){
												var bookId = $(v).children("span:hidden").text();
												var	documentUrl =  "booksInfo.html";
												if(isNaN(bookId) === false){
													documentUrl = "booksInfo.html?bookId="+bookId;
												}
												document.location.href = documentUrl;
											})
										})
								}, () => {
									
								})
						}else{
							//用户没有登录，则查找数据库中评分较高的数据
							var param = {
								url: "RecommenderAction_findTopNRecommer"
							}
							//相似书籍的推荐
							ajaxSend(param)
								.then( (res) => {
									if(res.code === 200 && res.msg === "SUCCESS"){
										xuanranRecomender(res);
									}else{
										errorTip("请稍后重试");
									}
								}, () => {
										errorTip("网络异常 请稍后重试");
								}).then( () => {
									//点击书籍，跳转到相应的书籍详细列表中
									var liElement = $(".recom-course-list-box ul").find("li");
									$.each(liElement, function(k, v){
										$(v).on("click", function(){
											var bookId = $(v).children("span:hidden").text();
											var	documentUrl =  "booksInfo.html";
											if(isNaN(bookId) === false){
												documentUrl = "booksInfo.html?bookId="+bookId;
											}
											document.location.href = documentUrl;
										})
									})
								})
							}
						//渲染推荐处的推荐书籍
						function xuanranRecomender(res){
							let{
								data,
								count
							} = res;
							var size = count;
							
						var str = ``;
						if( size >= 5) size = 5;
						//先渲染头部
							for(var i = 0; i< size; i++){
								str += `<li>
											<span style="display:none">${data[i].bookID}</span>
											<div class="aside-course-img">
												<img src=${data[i].boImg}>
											</div>
											<div class="aside-course-content">
												<a href="javascript:void(0)" class="aside-course-name">
													${data[i].boName}
												</a>
												<p class="aside-course-price">
													${data[i].auName}主编
												</p>
												<p class="aside-course-grade">
													${data[i].pbName}
												</p>
											</div>
										</li>`;
							}
							$(".recom-course-list-box:eq(0) ul").html(str);
							//然后渲染底部
							if( count === 10 ){
								var footer = ``;
								for(var i = 5; i< count; i++){
									footer +=  `<li>
													<span style="display:none">${data[i].bookID}</span>
													<div class="aside-course-img">
														<img src=${data[i].boImg}>
													</div>
													<div class="aside-course-content">
														<a href="javascript:void(0)" class="aside-course-name">
															${data[i].boName}
														</a>
														<p class="aside-course-price">
															${data[i].auName}主编
														</p>
														<p class="aside-course-grade">
															${data[i].pbName}
														</p>
													</div>
												</li>`;
								}
								$(".recom-course-list-box:eq(1) ul").html(footer);
							}
						}
					//用户评论
					$("i.button_cn_pin").on("click",function(){
						var _this = this;
						if(dbID !== null){
							if($(_this).prev().val().trim().length > 0){
								var pin_value = $(".input_cn_pin").val();
								$("dd.pin_lun_value").append(`<p><span style="color:#f05a28;">${localStorage.getItem("dbName")}:</span>&nbsp;&nbsp;${pin_value}</p>`);
								//评论完后，置为空
								$(".input_cn_pin").val("");
								var param = {
										url: "UserHouseBookAction_starPinScore",
										data:{
											"dbID": dbID,
											"bookID": getQueryString("bookId"),
											//用户给的星级
											"starCount": staticCount(),
											//用户评论
											"userComment": pin_value
										}
									};
									ajaxSend(param)
										.then( (res) => {
											if(res.code === 200 && res.msg === "SUCCESS"){
												
											}
										}, () => {
											
										})
							}else{
								layui.use(['layer'], function(){
						    		var layer = layui.layer;
						    		layer.tips('请评论', $(_this));
						    	});
							}
						}else{
							layui.use(['layer'], function(){
					    		var layer = layui.layer;
					    		layer.tips('请登录', $(_this));
					    	});
						}
						
					})
					//星级评分选中或不选中
					var iEle = $(".star-score").children("i");
					$.each(iEle, function(k, v){
						$(v).on("click",function(){
							if( $(v).hasClass("fa-star") )
									$(v).removeClass("fa-star").addClass("fa-star-o")
								else
									$(v).removeClass("fa-star-o").addClass("fa-star")
						})
					})
					
					function staticCount(){
						var iElements = $(".star-score").children("i");
						var count = 0;
						$.each(iElements, function(k, v){
							if($(v).hasClass("fa-star")){
								count++;	
							}
						})
						return count;
					}
					
						//用户收藏
					$(".extra .share:eq(0)").click(function(k, v){
						var _this = this;
						if(dbID !== null){
							var param = {
									url: "UserHouseBookAction_houseBooks",
									dataType:"json",
									type:"post",
									data:{
										"bookID": getQueryString("bookId"),
										"dbID" : dbID
									}
							}
							ajaxSend( param )
								.then( (res) => {
									if(res.code === 200 && res.msg === "SUCCESS"){
										$(_this).find("i").removeClass("fa-star-half-o").addClass("fa-star");
										layui.use(['layer'], function(){
								    		var layer = layui.layer;
								    		layer.tips('已收藏', $(_this).find("i"));
								    	});
									}else if(res.code === 200 && res.msg === "EXIST"){
										$(_this).find("i").removeClass("fa-star-half-o").addClass("fa-star");
										layui.use(['layer'], function(){
								    		var layer = layui.layer;
								    		layer.tips('已收藏', $(_this).find("i"));
								    	});
									}
								}, () => {
									errorTip("操作异常 请稍后重试");
								})
						}else{
							layui.use(['layer'], function(){
					    		var layer = layui.layer;
					    		layer.tips('请登录', $(_this).find("i"));
					    	});
						}
					})	
					
					$(".logoutApp").on("click",function(){
							$.ajax({
								url:"LoginGeneralAction_logout",
								type: 'post',
								dataType : 'json',
								success(res){
									if(res.code === 200 && res.msg === "SUCCESS"){
										localStorage.removeItem("dbID");
										localStorage.removeItem("dbName");
										localStorage.removeItem("dbProfile");
										document.location.reload();
									}else{
										errorTip("请求异常 请稍后重试");
									}
								},
								error(){
									errorTip("网络异常 请稍后重试");
								}
							})
						})
						//搜索处
				 $(".search-area input:eq(0)").focus(function(){
					 $(this).parent().siblings(".searchTags").css("display","none");
				 })
				 $(".search-area input:eq(0)").blur(function(){
					 $(this).parent().siblings(".searchTags").css("display","block");
				 })
				 /*页面卷动*/
				 $(window).on("scroll",function(){
					 var ItemHeight = $("#backTop").offset().top;
					 var scrollHeight = document.documentElement.scrollTop;
					 if(scrollHeight > 100){
					 	$("#backTop").fadeIn();
					 }else
						 $("#backTop").fadeOut();
				});
				$("#backTop").bind("click",function(){
					$("html,body").animate({scrollTop:0},500);
				});
				
				mobShare.config( {
				    appkey: '293a6b97a8ce0', // appkey
				    params: {
				        url: document.URL, // 分享链接
				        title: '很不错的一本书,快来一起学习吧', // 分享标题
				    },
				    callback: function( plat, params ) {
				    	var param = {
								url: "UserHouseBookAction_pinScore",
								dataType:"json",
								type:"post",
								data:{
									"bookID": getQueryString("bookId"),
									"dbID" : localStorage.getItem("dbID")
								}
						}
						ajaxSend( param )
							.then( (res) => {
								if(res.code === 200 && res.msg === "SUCCESS"){
									
								}else{
									errorTip("操作失败");
								}
							}, () => {
									errorTip("操作异常 请稍后重试");
							})
				    }
				} );
				// jquery库的使用方法
				$( '.fa-weibo' ).click( function() {
					if(localStorage.getItem("dbID") !== null){
						// 实例一个新浪微博的分享对象
						var weibo = mobShare( 'weibo' );
					    weibo.send();
					}else{
						layui.use(['layer'], function(){
				    		var layer = layui.layer;
				    		layer.tips('请登录', $(".fa-weibo") );
				    	});
					}
				} );
				
				$( '.fa-qq' ).click( function() {
					if(localStorage.getItem("dbID") !== null){
						// 实例一个新浪微博的分享对象
						var qzone = mobShare( 'qzone' );
						qzone.send();
					}else{
						layui.use(['layer'], function(){
				    		var layer = layui.layer;
				    		layer.tips('请登录', $(".fa-qq") );
				    	});
					}
				} );
			})
		</script>
	</body>
</html>
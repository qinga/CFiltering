<!DOCTYPE html>
<html>

	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta charset="utf-8">
		<title>动态</title>
		<link rel="stylesheet" href="../font-awesome-4.7.0/css/font-awesome.min.css" type="text/css"/>
		<link rel="stylesheet" href="./css/myShareArticle.css" type="text/css">
		<!-- layui.css样式 -->
		<link rel="stylesheet" href="../../Admin/layui/css/layui.css" type="text/css" />
		<style>
			ul li.tabactive{
				float: left;
				margin-right: 58px;
				margin-top: -1px;
				text-align: center;
				padding: 0 2px;
				height: 58px;
				line-height: 59px;
				color: #f24b42;
				display: inline-block;
				font-size: 14px;
				border-bottom: 2px solid #f01400;
			}
			
			ul .left_warp{
				float: right;
				text-align: right;
				padding-top: 9px;
			}
			
			ul .left_warp a{
				font-size: 14px;
				background-color: #f01400;
				width: 84px;
				height: 40px;
				line-height: 40px;
				color: #fff;
				text-align: center;
				margin-left: 20px;
				display: inline-block;
			}
			#pagenation li{
				display: inline-block;
			}
			
			#pagenation li.activePage a{
				background: #4d555d;
				color: #fff;
			}
			#pagenation .first, #pagenation .prev, #pagenation .next, #pagenation .last {
			    line-height: 32px;
			    margin: 0 15px;
			 }
			 #pagenation li.disabled a {
			    color: #c8cdd2;
			 }
			 .activeDivSu{
				background:#c8cdd2;
			}
			.u-container>p{
				color: #b5b9bc;
				font-size: 18px;
				line-height: 420px;
				text-align: center;
			}
		</style>
	</head>
	<body>
		<div id="header">
			<div class="page-container clearfix" id="nav">
				<div id="logo" class="logo">
					<a href="../index.html"  title="首页" style="text-align:center;">
						<img title="推荐系统" src="../booksInfor/img/logo.png" style="height:72px;">
					</a>
				</div>
				<ul class="nav-item">
					<li>
						<a href="./myShareArticle.html" class="active">我的分享</a>
					</li>
					<li>
						<a href="../booksType/booksType.html">书海</a>
					</li>
					<li>
						<a href="../shareDynaticLink/index.html">猿分享</a>
					</li>
				</ul>
				<div id="login-area">
					<ul class="clearfix logined">
						<li class="set_btn user-card-box" id="header-user-card">
							<a id="header-avator" class="user-card-item js-header-avator"  href="">
								<img src="" width="40" height="40">
							</a>
							<!--退出-->
							<div class="g-user-card">
								<div class="card-inner">
									<div class="card-top clearfix">
										<a href="#" class="l"><img src="" alt=""></a>
										<div class="card-top-right-box l">
											<a href="#">
												<span class="name text-ellipsis"></span>
											</a>
										</div>
									</div>
									<div class="card-sets clearfix logoutApp">
										<a href="javascript:void(0)" class="l">安全退出</a>
									</div>
								</div>
							</div>
						</li>
					</ul>
				</div>
				<div class="search-warp clearfix" style="min-width: 32px; height: 72px;">
					<div class="pa searchTags">
						<a href="#" target="_blank">小程序</a>
						<a href="#" target="_blank">JAVA入门</a>
					</div>
					<div class="search-area">
						<input class="search-input"  type="text" autocomplete="off">
						<input type="hidden" class="btn_search">
						<ul class="search-area-result">
						</ul>
					</div>
					<div class="showhide-search">
						<i class="fa fa-search" aria-hidden="true"></i>
					</div>
				</div>
			</div>
		</div>
		<div id="main">
			<div class="bg-other user-head-info">
				<div class="user-info clearfix">
					<div class="user-pic">
						<div class="user-pic-bg">
							<img class="img" src="" alt="">
						</div>
					</div>
					<div class="user-info-right">
						<h3 class="user-name clearfix">
							<span></span>
						</h3>
					</div>
					<div class="study-info clearfix">
						<div class="item follows">
							<div class="u-info-learn" title="学习时长430小时11分" style="cursor:pointer;">
								<em>4h</em>
								<span>学习时长 </span>
							</div>
						</div>
						<div class="item follows">
							<a href="#">
								<em>1</em>
							</a>
							<span>经验</span>
						</div>
					</div>
				</div>
			</div>
			<div class="wrap">
				<div class="slider">
					<ul>
						<li>
							<a href="../shareDynaticLink/index.html">
								<i class="fa fa-share-square" aria-hidden="true"></i>
								<span>动态圈</span>
								<b class="icon-drop_right"></b>
							</a>
						</li>
						<li>
							<a href="../perManage/perManage.html">
								<i class="fa fa-book" aria-hidden="true"></i>
								<span>我的课程</span>
								<b class="icon-drop_right"></b>
							</a>
						</li>
						<li>
							<a href="./myShareArticle.html"  class="active">
								<i class="fa fa-share" aria-hidden="true"></i>
								<span>我的分享</span>
								<b class="icon-drop_right"></b>
							</a>
						</li>
						<li>
							<a href="./myHouseArticle.html">
								<i class="fa fa-square" aria-hidden="true"></i>
								<span>我的收藏</span>
								<b class="icon-drop_right"></b>
							</a>
						</li>
						<li>
							<a href="./myLearnPath.html">
								<i class="fa fa-leanpub" aria-hidden="true"></i>
								<span>我的学习路线</span>
								<b class="icon-drop_right"></b>
							</a>
						</li>
					</ul>
				</div>
				<div class="u-container">
					<div class="page-home js-usercard-box" id="notices">
						<ul class="clearfix toptab" style="border-bottom: 1px solid #d4d5d7;">
					        <li class="tabactive">
					            <a href="#" style="color: #f24b42;">我的文章</a>
					        </li>
					        <div class="left_warp">
					            <a href="./articlePublish.html" class="wanna-build">写文章</a>
					       </div>        
					    </ul>
						<div class="discovery" style="padding-top: 40px;">
							<div class="discovery-feed">
							</div>
						</div>
						<div style="height: 35px;text-align: center;" class="outerPagenation">
							<div id="pagenation" style="display: inline-block;">
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="footer">
		</div>

		<div id="J_GotoTop" class="elevator">
			<a href="#" class="elevator-msg" target="_blank">
				<i class="fa fa-weixin" aria-hidden="true"></i>
				<span class="">分享至微信</span>
			</a>
			<a href="#" class="elevator-faq" target="_blank">
				<i class="fa fa-qq" aria-hidden="true"></i>
				<span class="">分享至QQ</span>
			</a>
			<a href="javascript:void(0)" class="elevator-top no-goto"  id="backTop">
				<i class="fa fa-chevron-circle-up" aria-hidden="true"></i>
				<span class="">返回顶部</span>
			</a>
		</div>
		<script type="text/javascript" src="../js/jquery.min.js"></script>
		<!-- layui.js -->
		<script src="../../Admin/layui/layui.js"></script>
		<script type="text/javascript" src="../booksType/js/jqpaginator.min.js"></script>
		<script type="text/javascript" src="./js/myShareLogin.js"></script>
	    <script type="text/javascript">
			$(function(){
				$(".logoutApp").on("click",function(){
					$.ajax({
						url:"LoginGeneralAction_logout",
						type: 'post',
						dataType : 'json',
						success(res){
							if(res.code === 200 && res.msg === "SUCCESS"){
								localStorage.removeItem("dbID");
								localStorage.removeItem("dbName");
								localStorage.removeItem("dbProfile");
								document.location.href = "../index.html";
							}else{
								errorTip("请求异常 请稍后重试");
							}
						},
						error(){
							errorTip("网络异常 请稍后重试");
						}
					})
				});
				 var pageSize = 5;
				 var  totalCounts = 1;
				 $('#pagenation').jqPaginator({
					   totalCounts: totalCounts,
					   pageSize:pageSize,
					   visiblePages: 10,
					   activeClass: 'activePage',
					   first: '<li class="first"><a href="javascript:void(0);">首页</a></li>',
					   prev: '<li class="prev"><a href="javascript:void(0);">上一页</a></li>',
					   next: '<li class="next"><a href="javascript:void(0);">下一页</a></li>',
					   last: '<li class="last"><a href="javascript:void(0);">尾页</a></li>',
					   page: '<li class="page"><a href="javascript:void(0);">{{page}}</a></li>',
					   onPageChange: function (num, type) {
						   $.ajax({
					    		type:"post",
					    		url: "SaveDyShareAction_findDyShare",
					    		dataType:"json",
					    		data:{
					    			"userId": localStorage.getItem("dbID"),
					    			"start" : num,
									"size" : pageSize
					    		}
					    	}).then( (res) => {
					    		if( res.code === 200 && res.msg ==="SUCCESS" ){
					    			let {
					    				data
					    			} = res;
					    			var str = ``;
					    			for(var i = 0; i < res.count; i ++){
					    				str += `<div class="discovery-box feed-list">
											<div class="user-pic l">
											<a href="javascript:void(0)" target="">
												<img src=${localStorage.getItem("dbProfile")}  width="40" height="40">
											</a>
										</div>
										<div class="feed-right">
											<div class="feed-header">
												<div class="feed-user js-feed-user">
													<a href="javascript:void(0)">${localStorage.getItem("dbName")}</a>
												</div>
												<span class="feed-header-tip">发表了文章</span>
												<div class="feed-time">
													${res.data[i].date}
												</div>
											</div>
											<div class="js-feed-content">
												<div class="feed-article">
													<div class="article-img">
														<img src=${res.data[i].media} alt="">
													</div>
													<div class="article-detail">
														<a href="javascript:void(0)" class="article-tit">
															${res.data[i].title}
														</a>
														<div class="articlecont">
															<a href="javascript:void(0)">
																${res.data[i].comment}
															</a>
														</div>
														<div class="article-tool">
															<div class="article-tip l">
																<a href="javascript:void(0)">${res.data[i].type}</a>
															</div>
															<div class="article-count r">
																浏览${res.data[i].skimCount === "null" ? 0 : res.data[i].skimCount}
															</div>
														</div>
													</div>
												</div>

											</div>
											<div class="feed-tool">
												<div class="feed-tool-btns l clearfix">
													<a href="javascript:void(0)" title="转发" class="js-forward-btn clearfix">
														<i class="fa fa-refresh" aria-hidden="true"></i>
														<span>0</span>
													</a>

													<a href="javascript:void(0)" title="评论" class="js-comment-btn clearfix">
														<i class="fa fa-commenting" aria-hidden="true"></i>
														<span>${res.data[i].comCount}</span>
													</a>
													<a href="javascript:void(0)" class="js-praise-btn clearfix ">
														<i class="fa fa-thumbs-up" aria-hidden="true"></i>
														<span>${res.data[i].thumbCount}</span>
													</a>
												</div>

												<a href="javascript:void(0)" class="feed-share-btn r">
													<i class="fa fa-ellipsis-h" aria-hidden="true"></i> 
												</a>

												<div class="feed-share r js-feed-share">
													<a href="javascript:;" class="feed-delete r js-delete">删除</a>
													<div class="bdsharebuttonbox bdshare-button-style0-16 r clearfix">
														<a class="bds_tsina bds_share fa fa-weibo" title="分享到新浪微博"></a>
														<a class="bds_qzone bds_share fa fa-qq" title="分享到QQ空间"></a>
													</div>
												</div>
											</div>
										</div>
									</div>`;
					    			}
					    			$(".u-container").find(".discovery-feed").html(str);
					    			if( res.count <= pageSize){
					    				$(".outerPagenation").css("visibility","hidden");
					    			}
					    			$('#pagenation').jqPaginator('option',{totalCounts:res.count + 1});
					    		}else{
					    			$(".u-container").append("<p>暂无动态</p>");
					    			$(".outerPagenation").css("visibility","hidden");
					    			$('#pagenation').jqPaginator('option',{totalCounts: res.count + 1});
					    		}
					    	}, () => {
					    		
					    	}).then( function() {
					    		var share = $(".feed-share-btn");
					    		$.each(share, function(k, v){
					    			$(this).hover(function(){
					    				$(this).next().css("display","block");
					    			}, function() {
					    				$(this).next().css("display","none");
					    			})
					    		})
					    	},function(){
					    		
					    	})
					   }
				 })
				var liElement =  $("#pagenation li.page").filter(":not('.activePage')");
				 $.each(liElement, function(k, v){
					 $(this).hover(function(){
						 $(this).find("a").addClass("activeDivSu");
					 },function(){
						 $(this).find("a").removeClass("activeDivSu");
					 })
				 })
				 //搜索处
				 $(".search-area input:eq(0)").focus(function(){
					 $(this).parent().siblings(".searchTags").css("display","none");
				 })
				 $(".search-area input:eq(0)").blur(function(){
					 $(this).parent().siblings(".searchTags").css("display","block");
				 })
			})
		</script>
	</body>
</html>